---
id: TASK-0001.04
title: 'TUI: Compose box with formatting toolbar'
status: Done
assignee:
  - '@claude'
created_date: '2026-02-04 20:52'
updated_date: '2026-02-04 22:00'
labels:
  - tui
  - ratatui
dependencies:
  - TASK-0001.01
references:
  - docs/specs/tui.txt
parent_task_id: TASK-0001
priority: medium
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Implement the message compose area at the bottom with a formatting toolbar (bold, italic, underline, strikethrough, link, attachment, emoji) and text input field.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
- [x] #1 Compose box with placeholder text showing current channel
- [x] #2 Formatting toolbar with B/I/U/strikethrough/link/attachment/emoji icons
- [x] #3 Text input accepts multi-line input with Ctrl+Enter for newlines
- [x] #4 Enter sends message, Ctrl+U clears compose box
- [x] #5 Send button visible on right side of compose area
- [x] #6 xterm-tmux validation: Capture screenshot with compose box focused, showing toolbar and cursor
<!-- AC:END -->

## Final Summary

<!-- SECTION:FINAL_SUMMARY:BEGIN -->
Added compose box with formatting toolbar to TUI.\n\nChanges:\n- New src/tui/compose.rs: ComposeState with text editing (insert, backspace, delete, cursor movement), horizontal scroll, multi-line via Ctrl+Enter\n- Formatting toolbar: B I U ~ link clip :) with send button\n- Focus-aware double borders, placeholder text showing channel name\n- Split content area into messages (fill) + compose (4 lines)\n- Enter sends message (logged via tracing::debug), Ctrl+U clears"
<!-- SECTION:FINAL_SUMMARY:END -->
