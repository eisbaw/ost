---
id: TASK-0001.03
title: 'TUI: Main message pane with threaded messages'
status: Done
assignee:
  - '@claude'
created_date: '2026-02-04 20:52'
updated_date: '2026-02-04 21:47'
labels:
  - tui
  - ratatui
dependencies:
  - TASK-0001.01
references:
  - docs/specs/tui.txt
parent_task_id: TASK-0001
priority: high
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Implement the main content area showing messages with sender name, timestamp, message content, attachments, reactions, and threaded replies. Messages should be scrollable.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
- [x] #1 Messages display with sender avatar/name, timestamp, and content
- [x] #2 Reactions shown with emoji and count (e.g., thumbs up 3, heart 1)
- [x] #3 Reply count indicator with expandable thread replies
- [x] #4 File attachments displayed with icon and filename
- [x] #5 Scrollable message list with scroll indicators
- [x] #6 xterm-tmux validation: Capture screenshot showing messages with reactions, replies, and attachments
<!-- AC:END -->

## Final Summary

<!-- SECTION:FINAL_SUMMARY:BEGIN -->
Added main message pane with threaded messages to TUI.\n\nChanges:\n- New src/tui/messages.rs: MessagesState with mock data (4 messages), message card rendering with borders, word-wrapped content, reactions, attachments, expandable thread replies\n- Single-pass build_message_lines returns both lines and per-message ranges (no duplicate traversal)\n- Auto-scroll keeps selected message visible, scroll indicators at viewport edges\n- Up/Down/j/k for message navigation, Enter to toggle thread expansion\n- Integrated into content area (right of sidebar)"
<!-- SECTION:FINAL_SUMMARY:END -->
