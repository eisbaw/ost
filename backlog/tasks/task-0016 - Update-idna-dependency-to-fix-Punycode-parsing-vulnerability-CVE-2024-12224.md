---
id: TASK-0016
title: Update idna dependency to fix Punycode parsing vulnerability (CVE-2024-12224)
status: Done
assignee:
  - '@claude'
created_date: '2026-02-06 00:19'
updated_date: '2026-02-06 00:27'
labels:
  - security
  - dependency
dependencies: []
priority: low
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Dependabot alert #1: The `idna` crate (transitive dependency through `url`) has a medium-severity Punycode label parsing issue (CVE-2024-12224). Currently `url` is pinned to `=2.4.1` in Cargo.toml to avoid `idna 1.x` which requires ICU packages needing rustc 1.83+. Once the rustc version constraint is lifted, update `url` to a version that pulls in a patched `idna`.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
- [x] #1 url crate is unpinned or updated to a version with patched idna
- [x] #2 CVE-2024-12224 no longer appears in dependabot alerts
- [x] #3 Project still builds and tests pass after the update
<!-- AC:END -->

## Final Summary

<!-- SECTION:FINAL_SUMMARY:BEGIN -->
Unpinned the `url` crate from `=2.4.1` to `\"2\"` in Cargo.toml, allowing it to resolve to v2.5.8 which pulls in `idna` v1.1.0 (patched against CVE-2024-12224).\n\nThe original pin was a workaround for rustc 1.82 not supporting the ICU packages required by `idna 1.x`. Since the nix-shell now provides rustc 1.86.0, the pin is no longer needed.\n\nChanges:\n- Cargo.toml: `url = \"=2.4.1\"` -> `url = \"2\"` (removed pin + stale comment)\n- Cargo.lock: `url` 2.4.1 -> 2.5.8, `idna` 0.4.0 -> 1.1.0\n\nVerification:\n- `cargo build` succeeds\n- All 91 tests pass\n- `cargo tree -i idna` confirms idna v1.1.0 (>= 1.0.3 required for CVE fix)
<!-- SECTION:FINAL_SUMMARY:END -->
