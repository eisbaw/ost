---
id: TASK-0001.02
title: 'TUI: Left pane with Teams hierarchy and Chats list'
status: Done
assignee:
  - '@claude'
created_date: '2026-02-04 20:52'
updated_date: '2026-02-04 21:32'
labels:
  - tui
  - ratatui
dependencies:
  - TASK-0001.01
references:
  - docs/specs/tui.txt
parent_task_id: TASK-0001
priority: high
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Implement the left sidebar showing collapsible Teams hierarchy with channels (with unread badges) and a Chats section with direct messages. Teams can be expanded/collapsed with arrow keys.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
- [x] #1 Teams section shows collapsible team entries with triangle indicators (▼/▶)
- [x] #2 Channels displayed under expanded teams with # prefix and unread badge numbers
- [x] #3 Chats section shows DM contacts with unread indicators
- [x] #4 Up/Down arrows navigate items, Enter expands/collapses teams
- [x] #5 xterm-tmux validation: Capture screenshot showing teams expanded/collapsed, unread badges visible
<!-- AC:END -->

## Implementation Plan

<!-- SECTION:PLAN:BEGIN -->
1. Create src/tui/sidebar.rs with sidebar widget\n2. Add mock data structures for teams/channels/chats\n3. Implement collapsible tree with triangle indicators\n4. Add channel unread badges and DM contact list\n5. Integrate sidebar into main layout (replace placeholder)\n6. Wire up/down arrow keys and Enter for expand/collapse\n7. Build and validate in xterm
<!-- SECTION:PLAN:END -->

## Implementation Notes

<!-- SECTION:NOTES:BEGIN -->
Implementation complete:
- Created src/tui/sidebar.rs with SidebarState, flat item enumeration, and rendering
- Teams hierarchy with expand/collapse (triangle indicators)
- Channels with # prefix and right-aligned unread badges
- Chats section with DM contacts, presence dots, and unread counts
- Up/Down/Enter navigation with header skipping
- Double borders + >> marker for focused state, plain borders when unfocused
- Scroll offset support for long lists
- Refactored to RowCtx struct to satisfy clippy argument count lint
- All 83 tests pass, no sidebar clippy warnings

Sidebar implemented with collapsible teams, channels with unread badges, chats section. Build passes, validated in xterm-tmux.
<!-- SECTION:NOTES:END -->

## Final Summary

<!-- SECTION:FINAL_SUMMARY:BEGIN -->
Added left sidebar pane with collapsible Teams hierarchy and Chats list.\n\nChanges:\n- New src/tui/sidebar.rs: SidebarState with mock data, flat item enumeration, expand/collapse, navigation with header skipping, scroll offset, and rendering with right-aligned unread badges\n- Updated app.rs: Added SidebarState, wired Up/Down/Enter keys, Tab pane cycling\n- Updated ui.rs: Split main area into sidebar (22 cols) + content\n- Extracted item_style/badge_style helpers to reduce duplication\n\nVisual features: double borders when focused, triangle indicators, yellow unread badges, green presence dots, DarkGray selection highlight"
<!-- SECTION:FINAL_SUMMARY:END -->
